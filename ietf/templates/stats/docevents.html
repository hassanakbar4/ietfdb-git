{% extends "base.html" %} 
{% block title %}
DocEvent Statistics
{% endblock %}

{% block morecss %}
.legend-key {margin-right:5px; display:inline-block;min-width:15px;}
.legend-mono-1 {background-color:rgba(200,200,200,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(200,200,200,1);}
.legend-mono-2 {background-color:rgba(180,180,180,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(180,180,180,1);}
.legend-mono-3 {background-color:rgba(160,160,160,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(160,160,160,1);}
.legend-mono-4 {background-color:rgba(130,130,130,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(130,130,130,1);}
.legend-mono-5 {background-color:rgba(100,100,100,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(100,100,100,1);}
.legend-angryfruitsalad-1 {background-color:rgba(37,52,148,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(37,52,148,1);}
.legend-angryfruitsalad-2 {background-color:rgba(44,127,184,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(44,127,184,1);}
.legend-angryfruitsalad-3 {background-color:rgba(65,182,196,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(65,182,196,1);}
.legend-angryfruitsalad-4 {background-color:rgba(161,218,180,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(161,218,180,1);}
.legend-angryfruitsalad-5 {background-color:rgba(255,240,124,0.05); border-top-style:solid; border-top-width:2px; border-top-color:rgba(255,240,124,1);}

{% endblock %}

{% block content %}
<dl>
<dt>new_revision and changed_document</dt><dd><div><canvas id="try1"></canvas></div></dd>
<dt>scheduled_for_telechat and iesg_approved</dt><dd><div><canvas id="try2"></canvas></div></dd>
<dt>
<div>
<span class="legend-key legend-mono-1">&nbsp;</span><span>requested_last_call</span>
<span class="legend-key legend-mono-2">&nbsp;</span><span>changed_ballot_writeup</span>
<span class="legend-key legend-mono-3">&nbsp;</span><span>changed_ballot_approval</span>
<span class="legend-key legend-mono-4">&nbsp;</span><span>scheduled_for_telechat</span>
<span class="legend-key legend-mono-5">&nbsp;</span><span>iesg_approved</span>
</div>
</dt>
  <dd>
     <div><canvas id="try3"></canvas></div>
  </dd>
<dt>
<div>
<span class="legend-key legend-angryfruitsalad-1">&nbsp;</span><span>requested_last_call</span>
<span class="legend-key legend-angryfruitsalad-2">&nbsp;</span><span>changed_ballot_writeup</span>
<span class="legend-key legend-angryfruitsalad-3">&nbsp;</span><span>changed_ballot_approval</span>
<span class="legend-key legend-angryfruitsalad-4">&nbsp;</span><span>scheduled_for_telechat</span>
<span class="legend-key legend-angryfruitsalad-5">&nbsp;</span><span>iesg_approved</span>
</div>
</dt>
  <dd>
     <div><canvas id="try3b"></canvas></div>
  </dd>
<dt>sent_last_call and iana_review</dt><dd><div><canvas id="try4"></canvas></div></dd>
<hr/>
{% for type,counts in event_counts.items %}
<dt>{{type}}</dt><dd><div>{{counts}}</div><div><canvas id="{{type}}"></canvas></div></dd>
{% endfor %}
</dl>
{% endblock %}

{% block js %}

<script src="/js/lib/Chart.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    $("canvas").attr('width','1200');

    var data1 = {
        labels: {{labels}},
        datasets: [
            { 
              fillColor : "rgba(220,220,220,0.5)",
              strokeColor : "rgba(220,220,220,1)",
              data: {{event_counts.new_revision}} 
            },
            { 
              fillColor : "rgba(151,187,205,0.5)",
              strokeColor : "rgba(151,187,205,1)",
              data: {{event_counts.changed_document}} 
            }
        ]
    }
    var data2 = {
        labels: {{labels}},
        datasets: [
            { 
              fillColor : "rgba(120,220,120,0.5)",
              strokeColor : "rgba(120,220,120,1)",
              data: {{event_counts.scheduled_for_telechat}} 
            },
            { 
              fillColor : "rgba(220,220,220,0.5)",
              strokeColor : "rgba(220,220,220,1)",
              data: {{event_counts.iesg_approved}} 
            },
        ]
    }
    var data3 = {
        labels: {{labels}},
        datasets: [
            { 
              fillColor : "rgba(100,100,100,0.05)",
              strokeColor : "rgba(100,100,100,1)",
              data: {{event_counts.iesg_approved}} 
            },
            { 
              fillColor : "rgba(130,130,130,0.05)",
              strokeColor : "rgba(130,130,130,1)",
              data: {{event_counts.changed_ballot_approval_text}} 
            },
            { 
              fillColor : "rgba(160,160,160,0.05)",
              strokeColor : "rgba(160,160,160,1)",
              data: {{event_counts.changed_ballot_writeup_text}} 
            },
            { 
              fillColor : "rgba(180,180,180,0.05)",
              strokeColor : "rgba(180,180,180,1)",
              data: {{event_counts.requested_last_call}} 
            },
            { 
              fillColor : "rgba(200,200,200,0.05)",
              strokeColor : "rgba(200,200,200,1)",
              data: {{event_counts.scheduled_for_telechat}} 
            },
        ]
    }
    var data3b = {
        labels: {{labels}},
        datasets: [
            { 
              fillColor : "rgba(255,240,124,0.05)",
              strokeColor: "rgba(255,240,124,1)",
              data: {{event_counts.iesg_approved}} 
            },
            { 
              fillColor : "rgba(161,218,180,0.05)",
              strokeColor: "rgba(161,218,180,1)",
              data: {{event_counts.changed_ballot_approval_text}} 
            },
            { 
              fillColor : "rgba(65,182,196,0.05)",
              strokeColor: "rgba(65,182,196,1)",
              data: {{event_counts.changed_ballot_writeup_text}} 
            },
            { 
              fillColor : "rgba(44,127,184,0.05)",
              strokeColor: "rgba(44,127,184,1)",
              data: {{event_counts.requested_last_call}} 
            },
            { 
              fillColor : "rgba(37,52,148,0.05)",
              strokeColor: "rgba(37,52,148,1)",
              data: {{event_counts.scheduled_for_telechat}} 
            },
        ]
    }
    var data4 = {
        labels: {{labels}},
        datasets: [
            { 
              fillColor : "rgba(120,220,120,0.5)",
              strokeColor : "rgba(120,220,120,1)",
              data: {{event_counts.iana_review}} 
            },
            { 
              fillColor : "rgba(220,220,220,0.5)",
              strokeColor : "rgba(220,220,220,1)",
              data: {{event_counts.sent_last_call}} 
            },
        ]
    }
    var options = {
	//Boolean - If we show the scale above the chart data			
	scaleOverlay : false,
	
	//Boolean - If we want to override with a hard coded scale
	scaleOverride : false,
	
	//** Required if scaleOverride is true **
	//Number - The number of steps in a hard coded scale
	scaleSteps : null,
	//Number - The value jump in the hard coded scale
	scaleStepWidth : null,
	//Number - The scale starting value
	scaleStartValue : null,

	//String - Colour of the scale line	
	scaleLineColor : "rgba(0,0,0,.1)",
	
	//Number - Pixel width of the scale line	
	scaleLineWidth : 1,

	//Boolean - Whether to show labels on the scale	
	scaleShowLabels : true,
	
	//Interpolated JS string - can access value
	scaleLabel : "<%=value%>",
	
	//String - Scale label font declaration for the scale label
	scaleFontFamily : "'Arial'",
	
	//Number - Scale label font size in pixels	
	scaleFontSize : 12,
	
	//String - Scale label font weight style	
	scaleFontStyle : "normal",
	
	//String - Scale label font colour	
	scaleFontColor : "#666",	
	
	///Boolean - Whether grid lines are shown across the chart
	scaleShowGridLines : true,
	
	//String - Colour of the grid lines
	scaleGridLineColor : "rgba(0,0,0,.05)",
	
	//Number - Width of the grid lines
	scaleGridLineWidth : 1,	
	
	//Boolean - Whether the line is curved between points
	bezierCurve : true,
	
	//Boolean - Whether to show a dot for each point
	//pointDot : true,
	pointDot : false,
	
	//Number - Radius of each point dot in pixels
	pointDotRadius : 3,
	
	//Number - Pixel width of point dot stroke
	pointDotStrokeWidth : 1,
	
	//Boolean - Whether to show a stroke for datasets
	datasetStroke : true,
	
	//Number - Pixel width of dataset stroke
	datasetStrokeWidth : 2,
	
	//Boolean - Whether to fill the dataset with a colour
	datasetFill : true,
	
	//Boolean - Whether to animate the chart
	animation : true,
	animation : false,

	//Number - Number of animation steps
	animationSteps : 60,
	
	//String - Animation easing effect
	animationEasing : "easeOutQuart",

	//Function - Fires when the animation is complete
	onAnimationComplete : null
	
    }
    var ctx = document.getElementById("try1").getContext("2d");
    var firsttry = new Chart(ctx).Line(data1,options);
    var ctx = document.getElementById("try2").getContext("2d");
    var secondtry = new Chart(ctx).Line(data2,options);
    var ctx = document.getElementById("try3").getContext("2d");
    var thirdtry = new Chart(ctx).Line(data3,options);
    var ctx = document.getElementById("try3b").getContext("2d");
    var thirdtry = new Chart(ctx).Line(data3b,options);
    var ctx = document.getElementById("try4").getContext("2d");
    var fourthtry = new Chart(ctx).Line(data4,options);

    {% for type,counts in event_counts.items %}
        var ctx = document.getElementById("{{type}}").getContext("2d");
        var data = {
            labels: {{labels}},
            datasets: [
                { 
                  fillColor : "rgba(220,220,220,0.5)",
                  strokeColor : "rgba(220,220,220,1)",
                  data: {{counts}} 
                },
             ]
        }
        var try_iter = new Chart(ctx).Line(data,options);
    {% endfor %}


});
</script>

{% endblock %}
