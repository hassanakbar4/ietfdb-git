{% extends "ietf.html" %}

{% load crispy_forms_tags %}

{% block title %}Change state of {{ doc }}{% endblock %}

{% block content %}
<h1>Change state of {{ doc }}</h1>

<p>
	<a class="btn btn-default" href="{% url "state_help" type="draft-iesg" %}">Help on states</a>
</p>

<form role="form" method="post">
	{% csrf_token %}
	{{ form|crispy }}

    {% if state and state.slug == "rfcqueue" %}
	<span class="help-block">
		<b>Note:</b> If you pull the draft out of the
		<i>{{ state.name }}</i> state, the RFC Editor and IANA will be notified
		by email with this comment, so they can update their queues.
	</span>
    {% endif %}

	<div class="buttonlist">
		<button type="submit" class="btn btn-primary">Submit</button>
		<a class="btn btn-default pull-right" href="{% url "doc_view" name=doc.name %}">Back</a>
	</div>
</form>

{% if next_states %}
	<h2>Or jump directly to</h2>

	<form role="form" method="post">
		{% csrf_token %}
		<div class="buttonlist">
		{% for n in next_states %}
			<input type="hidden" name="state" value="{{ n.pk }}">
			<input class="btn btn-default" type="submit" value="{{ n.name }}">
		{% endfor %}
	</form>
	</div>
{% endif %}

{% if to_iesg_eval %}
	<h2>You could also jump directly to</h2>

	<form role="form" method="post">
		{% csrf_token %}
		<input type="hidden" name="state" value="{{ to_iesg_eval.pk }}">
		<input class="btn btn-warning" type="submit" value="{{ to_iesg_eval.name }}">
		<p>But the ballot for this document has not yet been issued.</p>
		<a class="btn btn-default" href="{% url "doc_ballot_writeupnotes" name=doc.name %}">Edit ballot text</a>
	</form>
{% endif %}

{% if prev_state %}
	<h2>Or revert to previous state</h2>

	<form role="form" method="post">
		{% csrf_token %}
		<input type="hidden" name="state" value="{{ prev_state.pk }}">
		<input class="btn btn-danger" type="submit" value="Revert to {{ prev_state.name }}">
	</form>
{% endif %}
{% endblock %}
