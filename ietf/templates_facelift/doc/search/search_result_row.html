{% load ietf_filters %}

<tr>

<td class="addtolist">
{% if show_add_to_list and user.is_authenticated %}
	<a href="{% url "community_add_document" doc.name %}" title="Add to your personal ID list">
		<span class="glyphicon glyphicon-star-empty"></span>
	</a>
{% endif %}
</td>

<td class="doc">
	<p>
	<a href="{{ doc.get_absolute_url }}">{% if doc.get_state_slug == "rfc" %}RFC {{ doc.rfc_number }}{% else %}{{ doc.name }}-{{ doc.rev }}{% endif %}</a>

	{% if doc.get_state_slug == "rfc" and "draft" in doc.name %}
		<i>(was {{ doc.name }})</i>
	{% endif %}
	<br>
	<b>{{ doc.title }}</b>
	{% if doc.pages %}
		<br><span class="text-muted">({{doc.pages}} page{{ doc.pages|pluralize }})</span>
	{% endif %}
	</p>
</td>

<td class="nowrap">
	{% if doc.latest_revision_date|timesince_days|new_enough:request and doc.get_state_slug != "rfc" %}<a href="http:{{ rfcdiff_prefix }}?url2={{ doc.name }}-{{ doc.rev }}">{% endif %}{% if doc.get_state_slug == "rfc" %}{{ doc.latest_revision_date|date:"Y-m" }}{% else %}{{ doc.latest_revision_date|date:"Y-m-d" }}{% endif %}{% if doc.latest_revision_date|timesince_days|new_enough:request %}{% if doc.get_state_slug != "rfc" %}</a>{% endif %}
		<wbr><span class="label label-success">new</span>
	{% endif %}

	{% if doc.get_state_slug == "active" and doc.expirable and doc.expires|timesince_days|expires_soon:request %}
		<wbr><span class="label label-warning">expires soon</span>
	{% endif %}
</td>

{% include "doc/search/status_columns.html" %}

<td class="ipr text-center">
	{% if doc.iprs %}
		<a href="{% url "ipr_search" %}?option=document_search&amp;id={{ doc.name }}">{{ doc.iprs|length }}</a>
	{% endif %}
</td>

{% if ad_name == None or ad_name != doc.ad.plain_name %}
	<td class="ad">
		<p>{{ doc.ad|default:"" }}</p>
		<p class="text-muted">{{doc.shepherd|default:""}}</p>
	</td>
{% endif %}

</tr>
