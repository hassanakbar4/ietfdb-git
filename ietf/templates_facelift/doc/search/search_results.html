{% load ietf_filters %}

{% if not docs %}
	<div class="alert alert-info">
		No documents match your query.
	</div>
{% else %}

{% if meta.max %}
	<div class="alert alert-warning">
		Too many documents match your query! Returning only a partial result.
	</div>
{% endif %}

<table class="table table-condensed table-striped ietf">
	<thead>
		<tr>
			<th>
			{% if show_add_to_list and user.is_authenticated %}
				<span class="fa fa-tags"></span>
			{% endif %}
			</th>

			{% for h in meta.headers %}
				{% if h.title != "Title" %}
					<th class="{{ h.key }}">
					{% if "sort_url" in h %}
						<a href="{{ h.sort_url }}">{{ h.title }}
						{% if h.sorted %}<span class="caret"></span>{% endif %}
						</a>
					{% else %}
						{{ h.title }}
					{% endif %}
					</th>
				{% endif %}
			{% endfor %}
		</tr>
	</thead>

	{% regroup docs by search_heading as grouped_docs %}

	<tbody>
	{% for doc_group in grouped_docs %}
		<tr class="warning">
			<td></td>
			<td colspan="{{ meta.headers|length|add:"-1" }}">
				{{ doc_group.grouper|plural:doc_group.list }}
			</td>
		</tr>

		{% for doc in doc_group.list %}
			{% include "doc/search/search_result_row.html" %}
		{% endfor %}
	{% endfor %}
	</tbody>
</table>
{% endif %}
