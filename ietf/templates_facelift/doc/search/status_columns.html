{% load ietf_filters ballot_icon %}
<td class="status">
	<div class="ballot-icon pull-right">
		{% ballot_icon doc %}
	</div>

	{% if '::' in doc.friendly_state %}
		{{ doc.friendly_state|safe|split:"::"|join:"::<wbr>" }}
	{% else %}
		{{ doc.friendly_state|safe }}
	{% endif %}

	{% if not doc.get_state_slug == "rfc" %}
		<wbr>{{ doc|state_age_colored:"facelift" }}
	{% endif %}

	{% block extra_status %}
		{% if doc.telechat_date %}
			<br>IESG Telechat: {{ doc.telechat_date }}
		{% endif %}
	{% endblock %}

	{% if doc.get_state_slug != "rfc" %}{# I-D #}
		{% if doc|state:"draft-rfceditor" %}
			<br>RFC Editor State: <a href="http://www.rfc-editor.org/queue2.html#{{ doc.name }}">{{ doc|state:"draft-rfceditor" }}</a>
		{% endif %}

		{% if doc.stream %}
			<br>
			{% if doc|state:"stream" %}
				{{ doc|state:"stream" }}
			{% else %}
				{{ doc.stream }}
			{% endif %}

			{% for m in doc.milestones %}
				<span title="Part of {{ m.group.acronym }} milestone: {{ m.desc }}" class="milestone">{{ m.due|date:"M Y" }}</span>
			{% endfor %}
		{% endif %}

	{% else %}{# RFC #}
		{% if doc.obsoleted_by_list %}
			<div>Obsoleted by {{ doc.obsoleted_by_list|join:", "|urlize_ietf_docs }}</div>
		{% endif %}

		{% if doc.updated_by_list %}
			<div class="updated-by">Updated by {{ doc.updated_by_list|join:", "|urlize_ietf_docs }}</div>
		{% endif %}

		{% if doc.has_errata %}
			<div><a href="http://www.rfc-editor.org/errata_search.php?rfc={{ doc.rfc_number }}" rel="nofollow">Errata</a></div>
		{% endif %}
	{% endif %}
</td>
