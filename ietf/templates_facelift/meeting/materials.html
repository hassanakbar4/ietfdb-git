{% extends "ietf.html" %}

{% load ietf_filters %}

{% block title %}IETF {{ meeting_num }} preliminary &amp; interim materials{% endblock %}

{% block content %}
<h1>IETF {{ meeting_num }} meeting materials</h1>

{% if submission_started %}
	<p><b>Submission cutoff date:</b> {{ cut_off_date|date:"F j, Y" }}</p>
	<p><b>Corrections to submissions cutoff date:</b> {{ cor_cut_off_date|date:"F j, Y" }}</p>
{% endif %}

<p>
	<a class="btn btn-default" href="{% url "proceedings" %}">Meeting materials manager</a>
	<a class="btn btn-default" href="/meeting/{{meeting_num}}/requests">Meeting requests/conflicts</a>
</p>

<p class="btn-group">
	{% if plenaries %}
		<a class="btn btn-default" href="#plenaries">Plenaries</a>
	{% endif %}
	{% if ietf %}
		{% regroup ietf|dictsort:"group.parent.acronym" by group.parent.acronym as areas %}
		{% for area in areas %}
			 <a class="btn btn-default" href="#{{area.grouper}}">{{ area.grouper.upper }}</a>
		{% endfor %}
	{% endif %}
	{% if training %}
		<a class="btn btn-default" href="#training">Training</a>
	{% endif %}
	{% if iab %}
		<a class="btn btn-default" href="#iab-sessions">IAB</a>
	{% endif %}
	{% if irtf %}
		<a class="btn btn-default" href="#irtf">IRTF</a>
	{% endif %}
</p>

{# cache for 15 minutes, as long as there's no proceedings activity. takes 4-8 seconds to generate. #}
{% load cache %}
{% cache 900 ietf_meeting_materials meeting_num cache_version %}

{% with "True" as show_agenda %}
<table class="table table-condensed table-striped">
	<thead>
		<tr>
			<th>Group</th>
			<th>Agenda</th>
			<th>Minutes</th>
			<th>Slides</th>
		</tr>
	</thead>

	<tbody>
		<!-- Plenaries -->
		{% if plenaries %}
		<tr id="plenaries"><th colspan="4" class="warning">Plenaries</th></tr>
			{% for session in plenaries %}
				{% include "meeting/group_materials.html" %}
			{% endfor %}
		{% endif %}

		<!-- Working groups -->
		{% regroup ietf|dictsort:"group.parent.acronym" by group.parent.name as areas %}
		{% for sessions in areas %}
			<tr id="{{sessions.list.0.group.parent.acronym}}"><th colspan="4" class="warning">{{ sessions.grouper }}</th></tr>
			{% for session in sessions.list|dictsort:"group.acronym" %}
				{% ifchanged session.group.acronym %}
					{% include "meeting/group_materials.html" %}
				{% endifchanged %}
			{% endfor %}
		{% endfor %}

		<!-- Training Sessions -->
		{% if training %}
			{% with "False" as show_agenda %}
				<tr id="training"><th colspan="4" class="warning">Training</th></tr>
				{% for session in training %}
					{% ifchanged %}
						{% include "meeting/group_materials.html" %}
					{% endifchanged %}
				{% endfor %}
			{% endwith %}
		{% endif %}

		<!-- IAB Sessions -->
		{% if iab %}
			<tr id="iab-sessions"><th colspan="4" class="warning">IAB</th></tr>
			{% for session in iab %}
				{% ifchanged %}
					{% include "meeting/group_materials.html" %}
				{% endifchanged %}
			{% endfor %}
		{% endif %}

		<!-- IRTF Sessions -->
		{% if irtf %}
			<tr id="irtf"><th colspan="4" class="warning">IRTF</th></tr>
			{% for session in irtf|dictsort:"group.acronym" %}
				{% ifchanged %}
					{% include "meeting/group_materials.html" %}
				{% endifchanged %}
			{% endfor %}
		{% endif %}
	</tbody>
</table>
{% endwith %}

{% endcache %}

{% endblock %}
